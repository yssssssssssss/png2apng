# Trae 编辑器 Git 操作流程指南

## 📋 目录
- [源代码管理面板介绍](#源代码管理面板介绍)
- [初始化和克隆仓库](#初始化和克隆仓库)
- [文件状态管理](#文件状态管理)
- [提交操作流程](#提交操作流程)
- [分支管理](#分支管理)
- [远程仓库操作](#远程仓库操作)
- [冲突解决](#冲突解决)
- [高级功能](#高级功能)
- [快捷键参考](#快捷键参考)

---

## 🎛️ 源代码管理面板介绍

### 访问源代码管理
1. **侧边栏图标**：点击左侧活动栏中的源代码管理图标（分叉图标）
2. **快捷键**：`Ctrl+Shift+G`（Windows/Linux）或 `Cmd+Shift+G`（Mac）
3. **命令面板**：`Ctrl+Shift+P` → 输入 "Git" 查看所有 Git 相关命令

### 面板区域说明
```
┌─ 源代码管理 ─────────────────────┐
│ 📁 仓库名称                      │
│ ├── 🔄 更改 (3)                 │
│ │   ├── M  修改文件.js           │
│ │   ├── A  新增文件.ts           │
│ │   └── D  删除文件.css          │
│ ├── 📝 暂存的更改 (2)           │
│ │   ├── M  已暂存文件1.js        │
│ │   └── A  已暂存文件2.ts        │
│ └── 🌿 分支: main               │
│     └── 📤 同步更改             │
└─────────────────────────────────┘
```

---

## 🚀 初始化和克隆仓库

### 方法一：初始化新仓库

#### 1. 通过源代码管理面板
1. 打开项目文件夹
2. 点击源代码管理图标
3. 点击 **"初始化仓库"** 按钮
4. 确认初始化操作

#### 2. 通过命令面板
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Initialize Repository`
3. 选择要初始化的文件夹
4. 确认操作

### 方法二：克隆现有仓库

#### 1. 通过欢迎页面
1. 打开 Trae 编辑器
2. 点击 **"克隆 Git 仓库"**
3. 输入仓库 URL
4. 选择本地存储位置
5. 点击 **"克隆"**

#### 2. 通过命令面板
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Clone`
3. 粘贴仓库 URL
4. 选择克隆位置
5. 等待克隆完成

#### 3. 支持的仓库 URL 格式
```
# HTTPS 格式
https://github.com/用户名/仓库名.git
https://gitlab.com/用户名/仓库名.git
https://gitee.com/用户名/仓库名.git

# SSH 格式
git@github.com:用户名/仓库名.git
git@gitlab.com:用户名/仓库名.git
git@gitee.com:用户名/仓库名.git
```

---

## 📁 文件状态管理

### 文件状态标识
| 标识 | 含义 | 颜色 | 说明 |
|------|------|------|------|
| `M` | Modified | 🟡 黄色 | 文件已修改 |
| `A` | Added | 🟢 绿色 | 新增文件 |
| `D` | Deleted | 🔴 红色 | 文件已删除 |
| `R` | Renamed | 🔵 蓝色 | 文件已重命名 |
| `C` | Copied | 🟣 紫色 | 文件已复制 |
| `U` | Untracked | ⚪ 白色 | 未跟踪文件 |
| `!` | Ignored | 🔘 灰色 | 被忽略文件 |

### 查看文件差异

#### 1. 单击文件查看差异
- 在源代码管理面板中单击修改的文件
- 编辑器会分屏显示：
  - 左侧：原始版本
  - 右侧：当前版本
  - 高亮显示差异部分

#### 2. 差异视图功能
- **行号对比**：显示修改的具体行号
- **颜色标识**：
  - 🔴 红色：删除的内容
  - 🟢 绿色：新增的内容
  - 🟡 黄色：修改的内容
- **导航按钮**：上一个/下一个差异

#### 3. 内联差异查看
1. 右键点击文件
2. 选择 **"打开更改"**
3. 在编辑器中直接查看修改标记

---

## 💾 提交操作流程

### 标准提交流程

#### 1. 暂存文件

**方法一：单个文件暂存**
1. 在 "更改" 区域找到要暂存的文件
2. 点击文件右侧的 `+` 按钮
3. 文件移动到 "暂存的更改" 区域

**方法二：批量暂存**
1. 点击 "更改" 标题右侧的 `+` 按钮
2. 所有修改文件一次性暂存

**方法三：选择性暂存**
1. 打开文件差异视图
2. 选择要暂存的代码块
3. 点击代码块左侧的 `+` 按钮
4. 只暂存选中的修改部分

#### 2. 撤销暂存
1. 在 "暂存的更改" 区域找到文件
2. 点击文件右侧的 `-` 按钮
3. 文件返回到 "更改" 区域

#### 3. 编写提交信息
1. 在源代码管理面板顶部找到消息输入框
2. 输入提交信息（建议遵循规范）
3. 可以使用多行描述：
   - 第一行：简短描述（50字符内）
   - 空行
   - 详细描述

#### 4. 执行提交

**方法一：直接提交**
1. 确保有文件在暂存区
2. 输入提交信息
3. 点击 **"提交"** 按钮（✓ 图标）

**方法二：提交并推送**
1. 点击提交按钮旁的下拉箭头
2. 选择 **"提交并推送"**
3. 一次性完成提交和推送

**方法三：快捷键提交**
- `Ctrl+Enter`：提交暂存的更改
- `Ctrl+Shift+Enter`：提交所有更改

### 提交信息规范
```
# 功能类型
feat: 添加用户登录功能
fix: 修复页面加载错误
docs: 更新 API 文档
style: 调整按钮样式
refactor: 重构数据处理逻辑
test: 添加单元测试
chore: 更新依赖包版本

# 详细格式示例
feat: 添加用户注册功能

- 实现邮箱验证
- 添加密码强度检查
- 集成短信验证码
- 优化注册流程 UI

Closes #123
```

---

## 🌿 分支管理

### 查看分支信息
1. 在源代码管理面板底部查看当前分支
2. 点击分支名称查看分支列表
3. 状态栏左下角也显示当前分支

### 创建新分支

#### 方法一：通过分支菜单
1. 点击源代码管理面板中的分支名称
2. 选择 **"创建新分支"**
3. 输入分支名称
4. 选择基于哪个分支创建
5. 确认创建

#### 方法二：通过命令面板
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Create Branch`
3. 输入新分支名称
4. 选择源分支

#### 方法三：通过状态栏
1. 点击状态栏左下角的分支名称
2. 选择 **"创建新分支"**
3. 按提示操作

### 切换分支

#### 方法一：分支列表切换
1. 点击当前分支名称
2. 从列表中选择目标分支
3. 确认切换

#### 方法二：命令面板切换
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Checkout to`
3. 选择目标分支

### 分支操作菜单
右键点击分支名称，可以看到以下选项：
- **切换到分支**：切换到选中分支
- **创建分支**：基于当前分支创建新分支
- **重命名分支**：修改分支名称
- **删除分支**：删除本地分支
- **合并分支**：将选中分支合并到当前分支
- **变基分支**：将当前分支变基到选中分支

---

## 🌐 远程仓库操作

### 添加远程仓库

#### 方法一：通过命令面板
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Add Remote`
3. 输入远程仓库名称（如：origin）
4. 输入远程仓库 URL
5. 确认添加

#### 方法二：通过设置
1. 打开源代码管理面板
2. 点击 "..." 更多操作菜单
3. 选择 **"远程" → "添加远程"**
4. 按提示输入信息

### 推送操作

#### 1. 推送到远程分支

**方法一：同步更改**
1. 在源代码管理面板中点击 **"同步更改"** 按钮
2. 如果是首次推送，会提示设置上游分支
3. 确认推送操作

**方法二：推送菜单**
1. 点击 "..." 更多操作菜单
2. 选择 **"推送"**
3. 选择目标远程仓库和分支

**方法三：命令面板**
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Push`
3. 选择推送选项

#### 2. 首次推送设置
当首次推送新分支时，Trae 会提示：
1. **"发布分支"**：将本地分支推送到远程
2. 选择远程仓库（通常是 origin）
3. 确认分支名称
4. 点击确认推送

### 拉取操作

#### 1. 拉取远程更改

**方法一：同步更改**
- 点击 **"同步更改"** 按钮自动拉取并推送

**方法二：单独拉取**
1. 点击 "..." 更多操作菜单
2. 选择 **"拉取"**
3. 选择要拉取的远程分支

**方法三：获取更改**
1. 点击 "..." 更多操作菜单
2. 选择 **"获取"**
3. 只获取远程更改，不自动合并

#### 2. 拉取冲突处理
如果拉取时出现冲突：
1. Trae 会显示冲突文件列表
2. 点击冲突文件进入合并编辑器
3. 解决冲突后暂存文件
4. 提交合并结果

---

## ⚔️ 冲突解决

### 识别冲突
当出现合并冲突时，Trae 会：
1. 在源代码管理面板显示冲突文件（标记为 `C`）
2. 在编辑器中高亮冲突区域
3. 在状态栏显示冲突提示

### 冲突标记说明
```javascript
<<<<<<< HEAD (当前更改)
const message = "Hello from main branch";
=======
const message = "Hello from feature branch";
>>>>>>> feature-branch (传入的更改)
```

### 解决冲突的方法

#### 方法一：使用合并编辑器
1. 点击冲突文件打开三向合并视图
2. 查看三个面板：
   - **当前更改**（HEAD）
   - **传入的更改**（其他分支）
   - **合并结果**（中间面板）
3. 选择要保留的更改：
   - **接受当前更改**
   - **接受传入的更改**
   - **接受两者更改**
   - **手动编辑合并结果**

#### 方法二：直接编辑文件
1. 在编辑器中打开冲突文件
2. 手动删除冲突标记
3. 保留需要的代码
4. 保存文件

#### 方法三：使用快捷操作
在冲突区域会显示快捷按钮：
- **Accept Current Change**：接受当前更改
- **Accept Incoming Change**：接受传入更改
- **Accept Both Changes**：接受两者更改
- **Compare Changes**：比较更改

### 完成冲突解决
1. 解决所有冲突文件
2. 暂存已解决的文件
3. 提交合并结果
4. 推送到远程仓库

---

## 🔧 高级功能

### 1. 储藏（Stash）功能

#### 创建储藏
1. 点击 "..." 更多操作菜单
2. 选择 **"储藏" → "储藏更改"**
3. 输入储藏描述（可选）
4. 确认储藏

#### 管理储藏
1. 点击 "..." 更多操作菜单
2. 选择 **"储藏" → "弹出储藏"**
3. 选择要恢复的储藏
4. 确认操作

### 2. 标签管理

#### 创建标签
1. `Ctrl+Shift+P` 打开命令面板
2. 输入 `Git: Create Tag`
3. 输入标签名称
4. 添加标签描述（可选）
5. 确认创建

#### 推送标签
1. 点击 "..." 更多操作菜单
2. 选择 **"推送" → "推送标签"**
3. 选择要推送的标签

### 3. 历史记录查看

#### Git 历史扩展
1. 安装 "Git History" 扩展
2. 右键点击文件
3. 选择 **"Git: View File History"**
4. 查看文件的提交历史

#### 提交图表
1. 安装 "Git Graph" 扩展
2. 点击状态栏的 "Git Graph" 按钮
3. 查看分支和提交的可视化图表

### 4. 差异工具配置

#### 设置外部差异工具
1. 打开设置（`Ctrl+,`）
2. 搜索 "git.diff"
3. 配置外部差异工具路径
4. 设置合并工具

### 5. Git 忽略文件管理

#### 编辑 .gitignore
1. 在资源管理器中找到 `.gitignore` 文件
2. 双击打开编辑
3. 添加要忽略的文件模式
4. 保存文件

#### 常用忽略模式
```gitignore
# 依赖目录
node_modules/
__pycache__/
.venv/

# 构建输出
dist/
build/
*.min.js

# 日志文件
*.log
logs/

# 环境变量
.env
.env.local
.env.production

# 编辑器配置
.vscode/
.idea/
*.swp
*.swo

# 操作系统文件
.DS_Store
Thumbs.db
```

---

## ⌨️ 快捷键参考

### 基础操作
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+Shift+G` | 打开源代码管理 | 显示 Git 面板 |
| `Ctrl+Enter` | 提交暂存更改 | 快速提交 |
| `Ctrl+Shift+Enter` | 提交所有更改 | 暂存并提交 |
| `Ctrl+K Ctrl+O` | 打开文件夹 | 打开项目 |
| `Ctrl+Shift+P` | 命令面板 | 访问所有 Git 命令 |

### Git 专用快捷键
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+Shift+G G` | Git: 状态 | 查看仓库状态 |
| `Ctrl+Shift+G C` | Git: 提交 | 打开提交界面 |
| `Ctrl+Shift+G P` | Git: 推送 | 推送到远程 |
| `Ctrl+Shift+G L` | Git: 拉取 | 从远程拉取 |
| `Ctrl+Shift+G B` | Git: 分支 | 分支操作 |

### 文件操作
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+K Ctrl+D` | 查看文件差异 | 对比文件更改 |
| `Ctrl+K Z` | 撤销更改 | 恢复文件到上次提交 |
| `Ctrl+K Ctrl+S` | 暂存文件 | 添加到暂存区 |
| `Ctrl+K Ctrl+U` | 取消暂存 | 从暂存区移除 |

---

## 🎯 最佳实践建议

### 1. 工作流程建议
- **频繁提交**：每完成一个小功能就提交
- **清晰的提交信息**：使用规范的提交格式
- **分支策略**：为每个功能创建独立分支
- **定期同步**：经常拉取远程更改
- **代码审查**：使用 Pull Request 进行代码审查

### 2. 扩展推荐
- **GitLens**：增强 Git 功能，显示代码作者信息
- **Git History**：查看文件和项目的 Git 历史
- **Git Graph**：可视化分支和提交图表
- **GitHub Pull Requests**：在编辑器中管理 PR
- **GitKraken Glo Boards**：项目管理和任务跟踪

### 3. 性能优化
- **排除大文件**：在 `.gitignore` 中排除不必要的大文件
- **浅克隆**：对于大型仓库使用浅克隆
- **定期清理**：删除不需要的分支和标签
- **压缩历史**：定期压缩 Git 历史

### 4. 安全建议
- **使用 SSH 密钥**：避免在 URL 中暴露密码
- **环境变量保护**：不要提交敏感信息
- **定期备份**：重要分支及时推送到远程
- **权限管理**：合理设置仓库访问权限

---

## 🔍 故障排除

### 常见问题解决

#### 1. 认证问题
**问题**：推送时提示认证失败
**解决**：
1. 检查 Git 凭据设置
2. 重新配置 SSH 密钥
3. 使用个人访问令牌（GitHub）

#### 2. 合并冲突
**问题**：拉取时出现合并冲突
**解决**：
1. 使用 Trae 的合并编辑器
2. 手动解决冲突标记
3. 暂存并提交解决结果

#### 3. 分支同步问题
**问题**：本地分支与远程不同步
**解决**：
1. 执行 `Git: Fetch` 获取最新信息
2. 检查分支跟踪设置
3. 重新设置上游分支

#### 4. 性能问题
**问题**：Git 操作响应缓慢
**解决**：
1. 检查 `.gitignore` 配置
2. 清理工作区大文件
3. 优化 Git 配置

---

*本指南详细介绍了在 Trae 编辑器中使用 Git 源代码管理的各种功能和操作流程。建议根据实际使用情况进行实践和调整。*